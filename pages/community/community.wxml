<!--pages/community/community.wxml-->
<view>
  <view class="search-bar">
    <van-search shape="round" value="{{ value }}" placeholder="搜索昵称" />
  </view>
  <view class="message-list">
    <view wx:for="{{messageList}}" wx:key="item" data-sendMiniUser="{{currentUserOpenid===item.sendOpenid?item.sendMiniUser:item.receiveMiniUser}}" data-receiveMiniUser="{{currentUserOpenid!==item.sendOpenid?item.sendMiniUser:item.receiveMiniUser}}" bindtap="toChat">
      <view class="message-list-item">
        <view class="cu-avatar lg round" style="background-image:url({{currentUserOpenid===item.sendOpenid?item.receiveMiniUser.avatar:item.sendMiniUser.avatar}});">
          <view class="cu-tag badge" wx:if="{{item.unRead!==null}}">{{item.unRead}}</view>
        </view>
        <view class="message-info">
          <view class="username">
            {{currentUserOpenid===item.sendOpenid?item.receiveMiniUser.username:item.sendMiniUser.username}}
          </view>
          <view class="the-latest-msg">
            {{item.messageContent}}
          </view>
        </view>
        <view class="the-latest-date">
          <view>
            {{item.sendTime}}
          </view>
        </view>
      </view>
      <van-divider />
    </view>
  </view>
</view>